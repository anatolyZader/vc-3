# ðŸš€ Testing Local Dev Authentication in React Client

## Current Status
âœ… **Backend**: Running on `http://localhost:3000`  
âœ… **Frontend**: Running on `http://localhost:5173`  
âœ… **Dev Login**: Enhanced React components with dev login support

## How to Test

### 1. Open the Application
Navigate to: **http://localhost:5173**

### 2. Access the Login Page
Your app should route you to the login page if you're not authenticated.

### 3. Use the Dev Login Button
Look for the **"ðŸš€ Dev Login (Local Only)"** button:
- **Orange/amber colored button** 
- **Only visible in development mode**
- **Located between Google Login and Manual Login**

### 4. Click Dev Login
- Should instantly authenticate you as the development user
- No forms to fill out
- Uses default credentials: `dev@localhost.com` / `Developer`

### 5. Verify Authentication
After clicking dev login, you should see:
- **User Profile Display** with:
  - Username: `Developer`  
  - Email: `dev@localhost.com`
  - ID: `[UUID generated by backend]`
- **Logout Button** to end the session

## Technical Details

### What Happens Behind the Scenes
1. **Frontend** calls `POST /api/auth/dev-login` with default credentials
2. **Backend** creates in-memory dev user (no DB pollution)
3. **Backend** returns JWT token + sets secure cookie
4. **Frontend** updates authentication state
5. **User** is now authenticated for all protected routes

### Dev Login vs Production
| Mode | Authentication | User Storage | OAuth |
|------|---------------|--------------|-------|
| **Development** | Dev Login Button | In-Memory | Optional |
| **Production** | Google OAuth | Database | Required |

### Cookie Behavior
- **Development**: `secure=false`, `sameSite=Lax` (works on localhost)
- **Production**: `secure=true`, `sameSite=None` (HTTPS required)

## Testing Scenarios

### âœ… Basic Authentication Flow
1. Click "ðŸš€ Dev Login (Local Only)"
2. Should see user profile immediately
3. Can access protected routes (like chat)

### âœ… Logout and Re-login
1. Click "Logout" 
2. Should return to login page
3. Click dev login again - should work instantly

### âœ… Page Refresh Persistence
1. After dev login, refresh the browser
2. Should stay logged in (cookie persistence)
3. User profile should reload automatically

### âœ… API Calls with Authentication
- All API calls to `/api/*` should include the auth cookie
- No manual Authorization headers needed
- Backend will verify JWT from cookie

## Troubleshooting

### If Dev Login Button Doesn't Appear:
```javascript
// Check browser console for:
console.log('isDevelopment:', import.meta.env.DEV);
console.log('hostname:', window.location.hostname);
```
Both should be `true` and `localhost` respectively.

### If Login Fails:
Check browser Network tab:
- `POST /api/auth/dev-login` should return `200 OK`
- Response should include JWT token
- `Set-Cookie` header should be present

### If User Profile Doesn't Show:
Check browser console for:
- "âœ… Dev login successful" message
- User object in the log
- Any error messages

## Browser Developer Tools Testing

### Network Tab Verification
```bash
# Expected successful requests:
POST /api/auth/dev-login â†’ 200 OK (with Set-Cookie)
GET /api/auth/me â†’ 200 OK (with user data)
```

### Console Commands for Testing
```javascript
// Check current auth state
console.log('Auth Context:', React.useContext(AuthContext));

// Manual dev login test
fetch('/api/auth/dev-login', {
  method: 'POST', 
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({}),
  credentials: 'include'
}).then(r => r.json()).then(console.log);
```

## Success Indicators

âœ… **Orange dev login button visible**  
âœ… **One-click authentication works**  
âœ… **User profile displays after login**  
âœ… **Cookie persists across page refreshes**  
âœ… **Protected routes become accessible**  
âœ… **Logout and re-login cycle works**

Your local development authentication is now fully integrated! This gives you instant login capability without needing Google OAuth setup for local development. ðŸŽ‰